<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>RxJS  Demo</title>
</head>
<body>
  <p></p>
</body>
<script src='../lib/rxjs6.3.3.umd.js'></script>
<script>

  // const subject = new rxjs.Subject();
  // BehaviorSubject 在建立时就需要给定一个状态，并在之后任何一次订阅，就会先送出最新的状态。
  const subject = new rxjs.BehaviorSubject(0);


  var observerA = {
    next: value => console.log('A next: ' + value),
    error: error => console.log('A error: ' + error),
    complete: () => console.log('A complete!')
  }

  var observerB = {
    next: value => console.log('B next: ' + value),
    error: error => console.log('B error: ' + error),
    complete: () => console.log('B complete!')
  }

  subject.subscribe(observerA);

  subject.next(1);
  // "A next: 1"
  subject.next(2);
  // "A next: 2"
  subject.next(3);
  // "A next: 3"

  // BehaviorSubject 跟 Subject 最大的不同就是 BehaviorSubject 是用来呈现当前的值，而不是单纯的发送事件。
  // BehaviorSubject 会记住最新一次发送的元素，并把该元素当作目前的值，在使用上 BehaviorSubject 需要传入一个参数来代表起始的状态，范例如下
  setTimeout(() => {
    // 注意不是 source.subscribe
    // subject.subscribe 不会执行
    subject.subscribe(observerB); // 3秒后才订阅，observerB 不会收到任何值。
  },3000)

</script>
</html>
